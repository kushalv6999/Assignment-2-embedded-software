// Define the periods and rates for each task
#define TASK1_PERIOD 4000   // Period = 4ms, Rate = 250Hz

// Define global variables for tasks
volatile bool task1_done = false;

// Define the tasks as functions with no arguments
void task1() 
{
  // Output a digital signal
  digitalWrite(OUTPUT_PIN, HIGH);
  delayMicroseconds(200);
  digitalWrite(OUTPUT_PIN, LOW);
  delayMicroseconds(50);
  digitalWrite(OUTPUT_PIN, HIGH);
  delayMicroseconds(30);
  task1_done = true;
}
//Task 2
#define INPUT_PIN 2  // Pin connected to the input signal

void setup() {
  Serial.begin(9600);
}

void loop() {
  // Measure the pulse width
  uint32_t pulse_width = pulseIn(INPUT_PIN, HIGH);

  // Compute the frequency of the pulse
  float period = 2 * pulse_width / 1000.0;
  float frequency = 1000.0 / period;

  // Scale the frequency
  if (frequency < 333) {
    frequency = 0;
  }

  // Print the frequency
  Serial.print("FREQUENCY: ");
  Serial.println(frequency);

  // Wait for 20ms before taking the next reading
  delay(20);
}
